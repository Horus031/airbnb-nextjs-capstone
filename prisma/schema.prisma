generator client {
  provider     = "prisma-client"
  output       = "../src/modules-system/prisma/generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "mysql"
}

model BinhLuan {
  id                 Int       @id @default(autoincrement())
  ma_phong           Int
  ma_nguoi_binh_luan Int
  ngay_binh_luan     DateTime  @default(now()) @db.Timestamp(0)
  noi_dung           String    @db.VarChar(255)
  sao_binh_luan      Int?
  deletedBy          Int       @default(0)
  isDeleted          Boolean   @default(false)
  deletedAt          DateTime? @db.Timestamp(0)
  createdAt          DateTime  @default(now()) @db.Timestamp(0)
  updatedAt          DateTime  @default(now()) @db.Timestamp(0)
  NguoiDung          NguoiDung @relation(fields: [ma_nguoi_binh_luan], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "BinhLuan_ibfk_1")
  Phong              Phong     @relation(fields: [ma_phong], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "BinhLuan_ibfk_2")

  @@index([ma_nguoi_binh_luan], map: "ma_nguoi_binh_luan")
  @@index([ma_phong], map: "ma_phong")
}

model DatPhong {
  id             Int       @id @default(autoincrement())
  ma_phong       Int
  ngay_den       DateTime  @db.Timestamp(0)
  ngay_di        DateTime  @db.Timestamp(0)
  so_luong_khach Int
  ma_nguoi_dat   Int
  deletedBy      Int       @default(0)
  isDeleted      Boolean   @default(false)
  deletedAt      DateTime? @db.Timestamp(0)
  createdAt      DateTime  @default(now()) @db.Timestamp(0)
  updatedAt      DateTime  @default(now()) @db.Timestamp(0)
  Phong          Phong     @relation(fields: [ma_phong], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "DatPhong_ibfk_1")
  NguoiDung      NguoiDung @relation(fields: [ma_nguoi_dat], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "DatPhong_ibfk_2")

  @@index([ma_nguoi_dat], map: "ma_nguoi_dat")
  @@index([ma_phong], map: "ma_phong")
}

model Genders {
  id        Int         @id @default(autoincrement())
  name      String?     @db.VarChar(255)
  isActive  Boolean?    @default(true)
  deletedBy Int         @default(0)
  isDeleted Boolean     @default(false)
  deletedAt DateTime?   @db.Timestamp(0)
  createdAt DateTime    @default(now()) @db.Timestamp(0)
  updatedAt DateTime    @default(now()) @db.Timestamp(0)
  NguoiDung NguoiDung[]
}

model NguoiDung {
  id        Int        @id @default(autoincrement())
  name      String     @db.VarChar(255)
  email     String     @unique(map: "email") @db.VarChar(255)
  password  String?    @db.VarChar(255)
  phone     String?    @db.VarChar(255)
  birthday  String?    @db.VarChar(255)
  genderId  Int
  roleId    Int        @default(2)
  deletedBy Int        @default(0)
  isDeleted Boolean    @default(false)
  deletedAt DateTime?  @db.Timestamp(0)
  createdAt DateTime   @default(now()) @db.Timestamp(0)
  updatedAt DateTime   @default(now()) @db.Timestamp(0)
  BinhLuan  BinhLuan[]
  DatPhong  DatPhong[]
  Genders   Genders    @relation(fields: [genderId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "NguoiDung_ibfk_1")
  Roles     Roles      @relation(fields: [roleId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "NguoiDung_ibfk_2")

  @@index([genderId], map: "genderId")
  @@index([roleId], map: "roleId")
}

model Permissions {
  id             Int              @id @default(autoincrement())
  name           String           @db.VarChar(255)
  endpoint       String           @db.VarChar(255)
  method         String           @db.VarChar(100)
  module         String           @db.VarChar(100)
  deletedBy      Int              @default(0)
  isDeleted      Boolean          @default(false)
  deletedAt      DateTime         @default(now()) @db.Timestamp(0)
  createdAt      DateTime         @default(now()) @db.Timestamp(0)
  updatedAt      DateTime         @default(now()) @db.Timestamp(0)
  RolePermission RolePermission[]
}

model Phong {
  id        Int        @id @default(autoincrement())
  ten_phong String?    @db.VarChar(255)
  khach     Int
  phong_ngu Int
  giuong    Int
  phong_tam Int
  mo_ta     String?    @db.VarChar(255)
  gia_tien  Int
  may_giat  Boolean    @default(true)
  ban_la    Boolean    @default(true)
  tivi      Boolean    @default(true)
  dieu_hoa  Boolean    @default(true)
  wifi      Boolean    @default(true)
  bep       Boolean    @default(true)
  do_xe     Boolean    @default(true)
  ho_boi    Boolean    @default(true)
  ban_ui    Boolean    @default(true)
  ma_vi_tri Int
  hinh_anh  String?    @db.VarChar(255)
  deletedBy Int        @default(0)
  isDeleted Boolean    @default(false)
  deletedAt DateTime?  @db.Timestamp(0)
  createdAt DateTime   @default(now()) @db.Timestamp(0)
  updatedAt DateTime   @default(now()) @db.Timestamp(0)
  BinhLuan  BinhLuan[]
  DatPhong  DatPhong[]
  ViTri     ViTri      @relation(fields: [ma_vi_tri], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "Phong_ibfk_1")

  @@index([ma_vi_tri], map: "ma_vi_tri")
}

model RolePermission {
  id           Int         @id @default(autoincrement())
  roleId       Int
  permissionId Int
  isActive     Boolean?    @default(true)
  deletedBy    Int         @default(0)
  isDeleted    Boolean     @default(false)
  deletedAt    DateTime?   @db.Timestamp(0)
  createdAt    DateTime    @default(now()) @db.Timestamp(0)
  updatedAt    DateTime    @default(now()) @db.Timestamp(0)
  Roles        Roles       @relation(fields: [roleId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "RolePermission_ibfk_1")
  Permissions  Permissions @relation(fields: [permissionId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "RolePermission_ibfk_2")

  @@index([permissionId], map: "permissionId")
  @@index([roleId], map: "roleId")
}

model Roles {
  id             Int              @id @default(autoincrement())
  name           String?          @db.VarChar(255)
  description    String?          @db.VarChar(255)
  isActive       Boolean?         @default(true)
  deletedBy      Int              @default(0)
  isDeleted      Boolean          @default(false)
  deletedAt      DateTime?        @db.Timestamp(0)
  createdAt      DateTime         @default(now()) @db.Timestamp(0)
  updatedAt      DateTime         @default(now()) @db.Timestamp(0)
  NguoiDung      NguoiDung[]
  RolePermission RolePermission[]
}

model ViTri {
  id         Int       @id @default(autoincrement())
  ten_vi_tri String    @db.VarChar(255)
  tinh_thanh String    @db.VarChar(255)
  quoc_gia   String    @db.VarChar(255)
  hinh_anh   String?   @db.VarChar(255)
  deletedBy  Int       @default(0)
  isDeleted  Boolean   @default(false)
  deletedAt  DateTime? @db.Timestamp(0)
  createdAt  DateTime  @default(now()) @db.Timestamp(0)
  updatedAt  DateTime  @default(now()) @db.Timestamp(0)
  Phong      Phong[]
}
